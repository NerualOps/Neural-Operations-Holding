<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Primary SEO Meta Tags -->
  <title>Register - Neural Operations | Create Your Account for AI Business Solutions</title>
  <meta name="title" content="Register - Neural Operations | Create Your Account for AI Business Solutions">
  <meta name="description" content="Register for Neural Operations to access Epsilon AI assistant, Neural CRM, and AI-powered business automation. Start transforming your business with intelligent solutions today.">
  <meta name="keywords" content="Neural Operations register, Epsilon AI sign up, Neural CRM registration, AI business solutions account, create account">
  <meta name="robots" content="noindex, nofollow">
  <meta name="author" content="Neural Operations & Holdings LLC">
  <link rel="canonical" href="https://neuralops.biz/register">
  
  <!-- WebPage Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Register - Neural Operations",
    "description": "Create your account for AI-powered business solutions",
    "url": "https://neuralops.biz/register",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Neural Operations",
      "url": "https://neuralops.biz"
    }
  }
  </script>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://neuralops.biz/register">
  <meta property="og:title" content="Register - Neural Operations">
  <meta property="og:description" content="Create your account for AI-powered business solutions">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://neuralops.biz/register">
  <meta property="twitter:title" content="Register - Neural Operations">
  <meta property="twitter:description" content="Create your account for AI-powered business solutions">
  
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet"></noscript>
  <style>
    /* Professional Design System - Ignition Precision */
    :root {
      --flame-core: #F97316;
      --flame-highlight: #FF8A3D;
      --flame-deep: #C2410C;
      --near-black: #0F0F0F;
      --soft-white: #FAFAFA;
      --ash-neutral: #A1A1AA;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--near-black);
      color: var(--soft-white);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-image:
        radial-gradient(120% 120% at 20% 20%, rgba(255, 138, 61, 0.08) 0%, rgba(249, 115, 22, 0.05) 35%, transparent 70%),
        radial-gradient(120% 120% at 80% 80%, rgba(255, 138, 61, 0.06) 0%, transparent 50%);
    }

    .register-container {
      background: transparent;
      border: 1px solid var(--ash-neutral);
      border-radius: 8px;
      padding: 3rem;
      width: 100%;
      max-width: 500px;
      backdrop-filter: blur(20px);
      position: relative;
      overflow: hidden;
    }

    /* Plasma Line Effect */
    .register-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        var(--ash-neutral) 20%, 
        var(--flame-core) 50%, 
        var(--ash-neutral) 80%, 
        transparent 100%
      );
    }

    .logo {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--soft-white);
      text-decoration: none;
    }

    .logo-text::after {
      content: '●';
      color: var(--flame-core);
      margin-left: 4px;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: var(--soft-white);
      text-align: center;
      letter-spacing: 0.01em;
      font-weight: 700;
    }

    .sub {
      text-align: center;
      color: var(--ash-neutral);
      margin-bottom: 2rem;
    }

    .form-group {
      margin-bottom: 1.2rem;
    }

    .form-label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--soft-white);
      font-size: 0.9rem;
    }

    .form-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--ash-neutral);
      border-radius: 6px;
      background: transparent;
      color: var(--soft-white);
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      transition: all 0.15s ease-out;
    }

    input.form-input:focus, select.form-input:focus {
      outline: none;
      border-color: var(--flame-core);
      background: transparent;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
    }

    input, select {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--ash-neutral);
      border-radius: 6px;
      background: transparent;
      color: var(--soft-white);
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      transition: all 0.15s ease-out;
    }

    select {
      cursor: pointer;
    }

    select option {
      background: rgba(20, 25, 35, 0.98);
      color: rgba(255, 255, 255, 0.9);
      padding: 0.5rem;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--flame-core);
      background: transparent;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
    }

    .register-button {
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--flame-core);
      border: none;
      border-radius: 6px;
      color: var(--near-black);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease-out;
      margin-top: 1rem;
      font-family: 'Inter', sans-serif;
    }

    .register-button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 0 24px rgba(249, 115, 22, 0.15);
    }

    .register-button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    button {
      background: var(--flame-core);
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 1rem;
    }

    button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 0 24px rgba(249, 115, 22, 0.15);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    #message {
      text-align: center;
      font-weight: 500;
      margin-bottom: 1rem;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      font-size: 0.9rem;
      min-height: 20px;
    }

    .success { 
      color: #22c55e; 
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    
    .error { 
      color: #ef4444; 
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .info {
      color: #3b82f6;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .strength { 
      font-size: 0.9rem; 
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 4px;
    }
    .weak { 
      color: #dc3545; 
      background: rgba(220, 53, 69, 0.1);
    }
    .medium { 
      color: #ffc107; 
      background: rgba(255, 193, 7, 0.1);
    }
    .strong { 
      color: #28a745; 
      background: rgba(40, 167, 69, 0.1);
    }

    .login-link {
      text-align: center;
      margin-top: 1.5rem;
      color: var(--ash-neutral);
    }

    .login-link a {
      color: var(--flame-core);
      text-decoration: none;
      font-weight: 500;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: var(--neural-primary);
      animation: spin 1s ease-in-out infinite;
      margin-left: 10px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .google-signin-button {
      width: 100%;
      padding: 0.75rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--ash-neutral);
      border-radius: 6px;
      color: var(--soft-white);
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease-out;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Inter', sans-serif;
    }

    .google-signin-button:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-1px);
    }

    .google-signin-button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .apple-signin-button {
      width: 100%;
      padding: 0.75rem 1rem;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid var(--ash-neutral);
      border-radius: 6px;
      color: var(--soft-white);
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease-out;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Inter', sans-serif;
      margin-top: 0.75rem;
      gap: 0.5rem;
    }

    .apple-signin-button svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
      display: block;
    }

    .apple-signin-button:hover {
      background: rgba(0, 0, 0, 0.9);
      border-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-1px);
    }

    .apple-signin-button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .divider {
      display: flex;
      align-items: center;
      margin: 1.5rem 0;
      color: var(--ash-neutral);
      font-size: 0.9rem;
    }

    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: rgba(255, 255, 255, 0.1);
    }

    .divider span {
      padding: 0 1rem;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      body {
        padding: 1rem;
        align-items: flex-start;
        padding-top: 2rem;
        min-height: 100vh;
      }

      .register-container {
        padding: clamp(1.5rem, 4vw, 2rem) clamp(1.25rem, 3vw, 1.5rem);
        margin: 0;
        max-width: 100%;
        width: 100%;
        border-radius: 15px;
      }

      .register-header h1 {
        font-size: clamp(1.75rem, 6vw, 2rem);
        line-height: 1.2;
      }

      .register-header p {
        font-size: clamp(0.9rem, 3vw, 1rem);
        line-height: 1.5;
      }

      .form-row {
        flex-direction: column;
        gap: 1rem;
        width: 100%;
      }

      .form-group {
        margin-bottom: 1.5rem;
        width: 100%;
      }

      .form-group label {
        font-size: clamp(0.85rem, 2.5vw, 0.9rem);
      }

      .form-input {
        padding: clamp(0.875rem, 3vw, 1rem);
        font-size: clamp(0.95rem, 3.5vw, 1rem);
        width: 100%;
      }

      .register-btn {
        padding: clamp(0.875rem, 3vw, 1rem);
        font-size: clamp(0.95rem, 3.5vw, 1rem);
        width: 100%;
      }

      .divider {
        margin: 2rem 0;
        width: 100%;
      }

      .divider span {
        padding: 0 0.5rem;
        font-size: clamp(0.75rem, 2.5vw, 0.8rem);
      }

      .oauth-buttons {
        gap: 0.75rem;
        width: 100%;
        flex-direction: column;
      }

      .oauth-btn {
        padding: clamp(0.7rem, 2.5vw, 0.75rem) clamp(0.9rem, 3vw, 1rem);
        font-size: clamp(0.85rem, 3vw, 0.9rem);
        width: 100%;
      }

      .oauth-btn .oauth-icon {
        width: clamp(18px, 4vw, 20px);
        height: clamp(18px, 4vw, 20px);
        font-size: clamp(0.9rem, 3vw, 1rem);
      }

      .login-link {
        font-size: clamp(0.85rem, 2.5vw, 0.9rem);
        text-align: center;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 0.5rem;
        padding-top: 1rem;
      }

      .register-container {
        padding: 1.5rem 1rem;
      }

      .register-header h1 {
        font-size: 1.5rem;
      }

      .form-input {
        padding: 0.875rem;
        font-size: 0.95rem;
      }

      .register-btn {
        padding: 0.875rem;
        font-size: 0.95rem;
      }

      .oauth-btn {
        padding: 0.75rem;
        font-size: 0.85rem;
      }
    }

    /* Site Footer */
    .site-footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(10, 15, 25, 0.95);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        padding: 0.75rem 2rem;
        z-index: 100;
    }

    .footer-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .footer-left {
        color: rgba(255, 255, 255, 0.4);
        font-size: 0.8rem;
    }

    .footer-left p {
        margin: 0;
    }

    .footer-right {
        display: flex;
        align-items: center;
    }

    .footer-links {
        display: flex;
        gap: 2rem;
        align-items: center;
        list-style: none;
        margin: 0;
        padding: 0;
    }

    .footer-links a {
        color: rgba(255, 255, 255, 0.5);
        text-decoration: none;
        font-size: 0.8rem;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
    }

    .footer-links a:hover {
        color: rgba(255, 255, 255, 0.8);
    }

    .footer-divider {
        color: rgba(255, 255, 255, 0.3);
        margin: 0;
        display: flex;
        align-items: center;
        line-height: 1;
    }

    @media (max-width: 768px) {
    @media (max-width: 768px) {
        .site-footer {
            padding: 0.5rem 1rem;
        }

        .footer-content {
            flex-direction: column;
            gap: 0.5rem;
            text-align: center;
        }

        .footer-links {
            gap: 1rem;
        }
    }
  </style>
  <script>
    async function getCsrfToken() {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim().split('=');
            if (cookie[0] === 'csrfToken') {
                return cookie[1];
            }
        }
        var stored = localStorage.getItem('csrfToken');
        if (stored) return stored;
        try {
            var response = await fetch('/api/csrf-token', {
                method: 'GET',
                credentials: 'include'
            });
            if (response.ok) {
                var data = await response.json();
                if (data.token) {
                    localStorage.setItem('csrfToken', data.token);
                    return data.token;
                }
            }
        } catch (e) {}
        return '';
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        getCsrfToken();
    });
  </script>
</head>
<body>
  <div class="register-container">
    <div class="logo">
      <a href="/" style="color: #fff; text-decoration: none; font-weight: 500; font-size: 18px;">Home</a>
    </div>
    
    <h1>Join NeuralOps</h1>
    <p class="sub">Create your account to access the platform</p>
    
    <div id="message"></div>

    <div style="margin: 1.5rem 0; text-align: center; position: relative;">
      <div style="position: absolute; left: 0; right: 0; top: 50%; height: 1px; background: rgba(255, 255, 255, 0.1);"></div>
      <span style="background: linear-gradient(135deg, rgba(20, 25, 35, 0.8), rgba(25, 30, 40, 0.7)); padding: 0 1rem; color: rgba(255, 255, 255, 0.5); font-size: 0.85rem; position: relative;">OR</span>
    </div>

    <button type="button" class="google-signin-button" id="googleSignInBtn">
      <svg width="18" height="18" viewBox="0 0 18 18" style="margin-right: 0.5rem;">
        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.348 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/>
        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.293C4.672 5.163 6.656 3.58 9 3.58z"/>
      </svg>
      Continue with Google
    </button>

    <button type="button" class="apple-signin-button" id="appleSignInBtn">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z" fill="currentColor"/>
      </svg>
      Continue with Apple
    </button>

    <div style="margin: 1.5rem 0; text-align: center; position: relative;">
      <div style="position: absolute; left: 0; right: 0; top: 50%; height: 1px; background: rgba(255, 255, 255, 0.1);"></div>
      <span style="background: linear-gradient(135deg, rgba(20, 25, 35, 0.8), rgba(25, 30, 40, 0.7)); padding: 0 1rem; color: rgba(255, 255, 255, 0.5); font-size: 0.85rem; position: relative;">OR</span>
    </div>
    
    <form id="registerForm">
      <div class="form-group">
        <label class="form-label" for="name">Full Name</label>
        <input type="text" id="name" name="name" required autocomplete="name" />
      </div>
      
      <div class="form-group">
        <label class="form-label" for="email">Email Address</label>
        <input type="email" id="email" name="email" required autocomplete="email" />
      </div>
      
      <div class="form-group">
        <label class="form-label" for="company">Company (Optional)</label>
        <input type="text" id="company" name="company" autocomplete="organization" />
      </div>
      
      <div class="form-group">
        <label class="form-label" for="industry">Industry</label>
        <select id="industry" name="industry">
          <option value="">Select Industry</option>
          <option>Technology</option>
          <option>Finance</option>
          <option>Marketing</option>
          <option>Education</option>
          <option>Manufacturing</option>
          <option>Healthcare</option>
          <option>Retail</option>
          <option>Other</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="password">Password</label>
        <input type="password" id="password" name="password" required autocomplete="new-password" />
        <div id="strength" class="strength"></div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="confirmPassword">Confirm Password</label>
        <input type="password" id="confirmPassword" name="confirmPassword" required autocomplete="new-password" />
      </div>
      
      <button type="submit" id="submitBtn" class="register-button">Create Account</button>
    </form>

    <div class="login-link">
      Already have an account? <a href="/login">Sign in</a>
    </div>
  </div>

  <script>
    const form = document.getElementById('registerForm');
    const message = document.getElementById('message');
    const strengthText = document.getElementById('strength');
    const submitBtn = document.getElementById('submitBtn');
    const googleSignInBtn = document.getElementById('googleSignInBtn');
    const appleSignInBtn = document.getElementById('appleSignInBtn');

    function checkStrength(pw) {
      // Safety check: validate input
      if (!pw || typeof pw !== 'string') {
        strengthText.textContent = '';
        strengthText.className = 'strength';
        return;
      }
      // DoS protection: limit password length check
      if (pw.length > 1000) {
        strengthText.textContent = 'Password too long';
        strengthText.className = 'strength weak';
        return;
      }
      
      let score = 0;
      if (pw.length >= 8) score++;
      if (/[a-z]/.test(pw)) score++;
      if (/[A-Z]/.test(pw)) score++;
      if (/[0-9]/.test(pw)) score++;
      if (/[^A-Za-z0-9]/.test(pw)) score++;

      if (score < 3) {
        strengthText.textContent = 'Weak Password';
        strengthText.className = 'strength weak';
      } else if (score < 5) {
        strengthText.textContent = 'Medium Strength';
        strengthText.className = 'strength medium';
      } else {
        strengthText.textContent = 'Strong Password';
        strengthText.className = 'strength strong';
      }
    }

    document.getElementById('password').addEventListener('input', (e) => {
      checkStrength(e.target.value);
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(form);
      const name = formData.get('name') ? formData.get('name').trim() : '';
      const email = formData.get('email') ? formData.get('email').trim() : '';
      const company = formData.get('company') ? formData.get('company').trim() : '';
      const industry = formData.get('industry') || '';
      const password = formData.get('password') || '';
      const confirmPassword = formData.get('confirmPassword') || '';

      message.textContent = '';
      message.className = '';

      // Safety check: comprehensive input validation
      // DoS protection: length limits
      if (!name || typeof name !== 'string' || name.length === 0 || name.length > 200) {
        showMessage("Please enter a valid name (max 200 characters).", "error");
        return;
      }
      
      if (!email || typeof email !== 'string' || email.length === 0 || email.length > 255) {
        showMessage("Please enter a valid email address.", "error");
        return;
      }
      
      // Email format validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showMessage("Please enter a valid email address format.", "error");
        return;
      }
      
      if (company && (typeof company !== 'string' || company.length > 200)) {
        showMessage("Company name is too long (max 200 characters).", "error");
        return;
      }
      
      if (industry && (typeof industry !== 'string' || industry.length > 100)) {
        showMessage("Invalid industry selection.", "error");
        return;
      }
      
      if (!password || typeof password !== 'string' || password.length < 8) {
        showMessage("Password must be at least 8 characters long.", "error");
        return;
      }
      
      // DoS protection: password length limit
      if (password.length > 1000) {
        showMessage("Password is too long (max 1000 characters).", "error");
        return;
      }
      
      if (password !== confirmPassword) {
        showMessage("Passwords do not match.", "error");
        return;
      }

      // Show loading
      submitBtn.disabled = true;
      // Safe HTML: loading span is controlled content
      submitBtn.innerHTML = 'Creating Account<span class="loading"></span>';

      try {
        // Get CSRF token for request
        const csrfToken = await getCsrfToken();
        if (!csrfToken) {
          showMessage("Security token error. Please refresh the page.", "error");
          submitBtn.disabled = false;
          submitBtn.innerHTML = 'Create Account';
          return;
        }
        
        const response = await fetch('/api/auth', {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Accept': 'application/json',
            'X-CSRF-Token': csrfToken
          },
          credentials: 'include',
          body: JSON.stringify({
            action: 'register',
            name: name.substring(0, 200),
            email: email.substring(0, 255),
            company: company ? company.substring(0, 200) : '',
            industry: industry ? industry.substring(0, 100) : '',
            password: password.substring(0, 1000)
          })
        });

        // Silent - no console.log'Registration response status:', response.status);
        
        // Get the response text for debugging
        const responseText = await response.text();
        // Silent - no console.log'Response text:', responseText);
        
        // Parse the JSON response
        let data;
        try {
          // Safety check: validate response text length
          if (responseText.length > 10000) {
            throw new Error('Response too large');
          }
          data = JSON.parse(responseText);
          // Validate parsed data structure
          if (!data || typeof data !== 'object') {
            throw new Error('Invalid response format');
          }
        } catch (parseError) {
          console.error('Error parsing response:', parseError);
          throw new Error('Invalid response from server');
        }

        if (response.ok) {
          showMessage("Account created successfully! Redirecting to Epsilon AI...", "success");
          setTimeout(() => {
            window.location.href = '/epsilon';
          }, 2000);
        } else {
          // XSS protection: validate error message
          const errorMsg = data.error || 'Registration failed';
          const safeErrorMsg = typeof errorMsg === 'string' ? errorMsg.substring(0, 500) : 'Registration failed';
          showMessage(safeErrorMsg, "error");
          submitBtn.disabled = false;
          submitBtn.innerHTML = 'Create Account';
        }
      } catch (error) {
        console.error('Registration error:', error);
        showMessage('Network error. Please try again.', "error");
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'Create Account';
      }
    });

    function showMessage(text, type) {
      // Safety check: validate inputs
      if (!text || typeof text !== 'string') {
        text = 'An error occurred';
      }
      // DoS protection: limit message length
      const safeText = text.substring(0, 500);
      // XSS protection: use textContent
      message.textContent = safeText;
      // Validate type
      if (type === 'success' || type === 'error' || type === 'info') {
        message.className = type;
      } else {
        message.className = 'error';
      }
    }

    // Google Sign-In handler (currently not hooked up - ready for future implementation)
    if (googleSignInBtn) {
      googleSignInBtn.addEventListener('click', async () => {
        showMessage('Google Sign-In is not currently available. Please use the form below to create an account.', 'info');
      });
    }

    // Apple Sign-In handler (currently not hooked up - ready for future implementation)
    if (appleSignInBtn) {
      appleSignInBtn.addEventListener('click', async () => {
        showMessage('Apple Sign-In is not currently available. Please use the form below to create an account.', 'info');
      });
    }

  </script>
  
  <!-- Load required scripts - defer for faster page load -->
  <script src="/services/libs/supabase.js" defer></script>

  <footer class="site-footer">
      <div class="footer-content">
          <div class="footer-left">
              <p>&copy; 2025 Neural Op's is a division of Neural Operations & Holdings LLC. All rights reserved.</p>
          </div>
          <div class="footer-right">
              <div class="footer-links">
                  <a href="/about">About Us</a>
                  <span class="footer-divider">•</span>
                  <a href="/contact">Contact</a>
                  <span class="footer-divider">•</span>
                  <a href="/privacy">Privacy</a>
                  <span class="footer-divider">•</span>
                  <a href="/terms">Terms of Service</a>
              </div>
          </div>
      </div>
  </footer>
</body>
</html>
